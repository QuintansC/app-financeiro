(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{4954:e=>{e.exports={container:"LoadingScreen_container__kroiF",spinner:"LoadingScreen_spinner__Id4H8",spin:"LoadingScreen_spin__CRGcH",message:"LoadingScreen_message__9M_gS"}},9161:e=>{e.exports={container:"page_container__jZF7q",header:"page_header__oRW75",error:"page_error__JBrsB",sectionTitle:"page_sectionTitle__6ic_4",quickActionsTitle:"page_quickActionsTitle__xB8Zf",chartsGrid:"page_chartsGrid__peIB4",chartColumn:"page_chartColumn___bIhV",quickActions:"page_quickActions__u1HV5",quickActionsGrid:"page_quickActionsGrid__QQNue",quickActionCard:"page_quickActionCard__pxwYz",quickActionIcon:"page_quickActionIcon__ETgbE",quickActionText:"page_quickActionText__SrmOO",success:"page_success__r1r7Y",actionButtons:"page_actionButtons__aac_D",addButton:"page_addButton__HNjXU",uploadButton:"page_uploadButton__INvZj",addActionCard:"page_addActionCard__f8FAF"}},13876:(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var n=a(1521),r=a(64785),o=a(98027);function i(){let[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(!1),[l,s]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),u=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(i(!0),d(null),!e){let e=(0,o.hi)();if(e){t(e),i(!1);try{let e=await (0,r.dR)();(0,o.H$)(e),t(e)}catch(e){console.warn("Erro ao atualizar cache em background:",e)}return}}let a=await (0,r.dR)();(0,o.H$)(a),t(a)}catch(a){let e=(0,o.hi)();e?(t(e),d("Erro ao atualizar dados. Mostrando dados em cache.")):d(a.message||"Erro ao carregar dados")}finally{i(!1)}},[]);(0,n.useEffect)(()=>{let e=(0,o.hi)();e&&t(e),u()},[u]);let _=(0,n.useCallback)(async e=>{s(!0),d(null);try{let t=await e();return(0,o.gm)(),await u(!0),t}catch(e){throw d(e.message||"Erro inesperado"),e}finally{s(!1)}},[u]);return{data:e,loading:a,operationLoading:l,error:c,refresh:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u(e)},saveDebt:e=>_(()=>(0,r.cx)(e)),removeDebt:e=>_(()=>(0,r.BH)(e)),saveSalary:e=>_(()=>(0,r.C1)(e)),saveSavings:e=>_(()=>(0,r.Nt)(e)),saveMonth:e=>_(()=>(0,r.a1)(e)),savePreferences:(0,n.useCallback)(async e=>{try{await (0,r.PK)(e),t(t=>({...t,preferences:e}))}catch(e){throw d(e.message||"Erro ao salvar prefer\xeancias"),e}},[]),saveUser:e=>_(()=>(0,r.TK)(e))}}},17077:(e,t,a)=>{Promise.resolve().then(a.bind(a,71331))},18539:(e,t,a)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number.isFinite(e)?e:0)}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"".concat(Math.round(100*(e||0)),"%")}function o(e){if(!e)return"—";try{return new Intl.DateTimeFormat("pt-BR").format(new Date(e))}catch(t){return e}}a.d(t,{Yq:()=>o,l9:()=>r,vv:()=>n})},23770:e=>{e.exports={button:"Button_button__aJ0V6",primary:"Button_primary__NvDjW",secondary:"Button_secondary__PNkAv",danger:"Button_danger__4QObZ",outline:"Button_outline__VR8yn",ghost:"Button_ghost__8k_dh",small:"Button_small__Dzghh",medium:"Button_medium__6mHOF",large:"Button_large__P9YO9",fullWidth:"Button_fullWidth__uTKaF",loadingContainer:"Button_loadingContainer__AyB9x",spinner:"Button_spinner__7wA18",spin:"Button_spin__rWqPt"}},30029:e=>{e.exports={container:"Section_container__pgS5h",title:"Section_title__dplNc"}},40731:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var n=a(73365),r=a(23770),o=a.n(r);function i(e){let{title:t,onClick:a,variant:r="primary",size:i="medium",disabled:l=!1,loading:s=!1,fullWidth:c=!1,type:d="button",className:u="",..._}=e,h=[o().button,o()[r],o()[i],l&&o().disabled,c&&o().fullWidth,u].filter(Boolean).join(" ");return(0,n.jsx)("button",{type:d,className:h,onClick:a,disabled:l||s,..._,children:s?(0,n.jsxs)("span",{className:o().loadingContainer,children:[(0,n.jsx)("span",{className:o().spinner}),(0,n.jsx)("span",{children:"Carregando..."})]}):t})}},54644:e=>{e.exports={calendar:"Calendar_calendar__HhpCu",calendarHeader:"Calendar_calendarHeader__o9ZBS",yearTitle:"Calendar_yearTitle__udLyk",navButton:"Calendar_navButton__KXar2",monthsGrid:"Calendar_monthsGrid__DK15L",monthCell:"Calendar_monthCell__qayzj",hasValue:"Calendar_hasValue__nuOIU",empty:"Calendar_empty__2G5Zr",monthHeader:"Calendar_monthHeader__YOKuG",monthName:"Calendar_monthName__8je1X",monthIndicator:"Calendar_monthIndicator__87T2e",monthContent:"Calendar_monthContent__y0XGh",monthValue:"Calendar_monthValue__drAJx",monthEmpty:"Calendar_monthEmpty__ycE2D",yearSelector:"Calendar_yearSelector__WYTws",yearButton:"Calendar_yearButton__C9rLJ",active:"Calendar_active__1HwTm"}},56545:(e,t,a)=>{"use strict";a.d(t,{x:()=>i});var n=a(73365),r=a(4954),o=a.n(r);function i(e){let{message:t="Carregando..."}=e;return(0,n.jsxs)("div",{className:o().container,children:[(0,n.jsx)("div",{className:o().spinner}),(0,n.jsx)("p",{className:o().message,children:t})]})}},64785:(e,t,a)=>{"use strict";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),n=await fetch("".concat("http://localhost:3333/api").concat(e),{headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers||{}},...t});if(!n.ok)throw 401===n.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"),Error((await n.json().catch(()=>({message:n.statusText}))).message||"Erro ao comunicar com a API");return 204===n.status?null:n.json()}function r(){return n("/dados")}function o(e){return n("/dividas",{method:"POST",body:JSON.stringify(e)})}function i(e){return n("/dividas/".concat(e),{method:"DELETE"})}function l(e){return n("/salario",{method:"POST",body:JSON.stringify(e)})}function s(e){return n("/poupanca",{method:"POST",body:JSON.stringify(e)})}function c(e){return n("/meses",{method:"POST",body:JSON.stringify(e)})}function d(e){return n("/preferencias",{method:"POST",body:JSON.stringify(e)})}function u(e){return n("/acoes-rapidas",{method:"POST",body:JSON.stringify(e)})}function _(e){return n("/acoes-rapidas/ordem",{method:"POST",body:JSON.stringify({routeOrder:e})})}function h(e){return n("/acoes-rapidas/".concat(encodeURIComponent(e)),{method:"DELETE"})}function m(e){return n("/usuario",{method:"POST",body:JSON.stringify(e)})}a.d(t,{BH:()=>i,C1:()=>l,IG:()=>_,Nt:()=>s,PK:()=>d,TK:()=>m,UE:()=>h,a1:()=>c,cx:()=>o,dR:()=>r,wn:()=>u})},71331:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var n=a(73365),r=a(1521),o=a(13876),i=a(80146),l=a(18539),s=a(54644),c=a.n(s);let d=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],u=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];function _(e){let{months:t=[],onMonthClick:a}=e,[o,i]=(0,r.useState)(()=>new Date().getFullYear()),s=(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{let a,n;if(t.id&&t.id.includes("-"))a=parseInt(t.id.split("-")[0]);else if(t.label){let e=t.label.match(/\d{4}/);a=e?parseInt(e[0]):o}else a=o;if(e[a]||(e[a]={}),t.id&&t.id.includes("-"))n=parseInt(t.id.split("-")[1]);else if(t.label){let e=t.label.toLowerCase().split("/")[0].trim();0===(n=d.findIndex(t=>t.toLowerCase().startsWith(e))+1)&&(n=u.findIndex(t=>t.toLowerCase().startsWith(e))+1)}n&&n>=1&&n<=12&&(e[a][n]=t)}),e},[t,o]),_=(0,r.useMemo)(()=>{let e=Object.keys(s).map(Number).sort((e,t)=>e-t);return 0===e.length?[o]:e},[s,o]),h=_.includes(o)?o:_[0]||o,m=s[h]||{},p=e=>{e&&a&&a(e)},f=[];for(let e=1;e<=12;e++){let t=m[e],a=t&&t.total>0,r=t||{id:"".concat(h,"-").concat(String(e).padStart(2,"0")),label:"".concat(d[e-1].toLowerCase(),"/").concat(h),total:0};f.push((0,n.jsxs)("div",{className:"".concat(c().monthCell," ").concat(a?c().hasValue:""," ").concat(t?"":c().empty),onClick:()=>p(r),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),p(r))},children:[(0,n.jsx)("div",{className:c().monthHeader,children:(0,n.jsx)("span",{className:c().monthName,children:u[e-1]})}),(0,n.jsx)("div",{className:c().monthContent,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:c().monthValue,children:(0,l.vv)(t.total||0)}),a&&(0,n.jsx)("span",{className:c().monthIndicator,children:"●"})]}):(0,n.jsx)("span",{className:c().monthEmpty,children:"—"})})]},e))}return(0,n.jsxs)("div",{className:c().calendar,children:[(0,n.jsxs)("div",{className:c().calendarHeader,children:[(0,n.jsx)("button",{className:c().navButton,onClick:()=>{let e=_.indexOf(h);e>0&&i(_[e-1])},disabled:0===_.indexOf(h),"aria-label":"Ano anterior",children:"←"}),(0,n.jsx)("h2",{className:c().yearTitle,children:h}),(0,n.jsx)("button",{className:c().navButton,onClick:()=>{let e=_.indexOf(h);e<_.length-1&&i(_[e+1])},disabled:_.indexOf(h)===_.length-1,"aria-label":"Pr\xf3ximo ano",children:"→"})]}),(0,n.jsx)("div",{className:c().monthsGrid,children:f}),_.length>1&&(0,n.jsx)("div",{className:c().yearSelector,children:_.map(e=>(0,n.jsx)("button",{className:"".concat(c().yearButton," ").concat(e===h?c().active:""),onClick:()=>i(e),children:e},e))})]})}var h=a(40731),m=a(89849),p=a.n(m);function f(e){let{isOpen:t,onClose:a,month:o,onSubmit:i}=e,[l,s]=(0,r.useState)("");if((0,r.useEffect)(()=>{o&&t&&s(String(o.total||""))},[o,t]),!t||!o)return null;function c(){s(""),a()}return(0,n.jsx)("div",{className:p().overlay,onClick:c,children:(0,n.jsxs)("div",{className:p().modal,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:p().header,children:[(0,n.jsxs)("h2",{className:p().title,children:["Atualizar ",o.label]}),(0,n.jsx)("button",{className:p().closeButton,onClick:c,"aria-label":"Fechar",children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l.trim()&&(null==i||i({id:o.id,label:o.label,total:(e=>{if(""===e||null==e)return 0;let t=Number(String(e).replace(",","."));return isNaN(t)?0:t})(l)}),s(""),a())},className:p().form,children:[(0,n.jsxs)("div",{className:p().field,children:[(0,n.jsx)("label",{className:p().label,children:"Valor planejado"}),(0,n.jsx)("input",{className:p().input,type:"text",value:l,onChange:e=>s(e.target.value),placeholder:"Ex: 5000,00",inputMode:"numeric",required:!0,autoFocus:!0}),(0,n.jsxs)("small",{className:p().hint,children:["Digite o valor total planejado para ",o.label]})]}),(0,n.jsxs)("div",{className:p().actions,children:[(0,n.jsx)(h.$,{type:"button",title:"Cancelar",variant:"outline",onClick:c,className:p().cancelButton}),(0,n.jsx)(h.$,{type:"submit",title:"Salvar",variant:"primary"})]})]})]})})}var g=a(56545),v=a(9161),y=a.n(v);function x(){let{data:e,loading:t,refresh:a,saveMonth:l,operationLoading:s}=(0,o.c)(),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)("");if(t&&!e||s)return(0,n.jsx)(g.x,{message:s?"Processando...":"Carregando dados..."});async function v(e){try{await l(e),p("M\xeas atualizado"),d(!1),h(null),setTimeout(()=>p(""),3e3)}catch(e){p(e.message||"Erro ao atualizar m\xeas")}}return(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsx)("h1",{className:y().header,children:"Planejamento Mensal"}),m&&(0,n.jsx)("div",{className:m.includes("Erro")?y().error:y().success,children:m}),(0,n.jsx)(i.w,{title:"Calend\xe1rio de Planejamento",children:(0,n.jsx)(_,{months:(null==e?void 0:e.months)||[],onMonthClick:function(e){h(e),d(!0)}})}),(0,n.jsx)(f,{isOpen:c,onClose:function(){d(!1),h(null)},month:u,onSubmit:v})]})}},80146:(e,t,a)=>{"use strict";a.d(t,{w:()=>i});var n=a(73365),r=a(30029),o=a.n(r);function i(e){let{title:t,children:a}=e;return(0,n.jsxs)("div",{className:o().container,children:[t&&(0,n.jsx)("h2",{className:o().title,children:t}),a]})}},89849:e=>{e.exports={overlay:"MonthEditModal_overlay__2Fjka",fadeIn:"MonthEditModal_fadeIn__5HnOn",modal:"MonthEditModal_modal__CdVT4",slideUp:"MonthEditModal_slideUp__dcxXe",header:"MonthEditModal_header__fu_uG",title:"MonthEditModal_title__a7zST",closeButton:"MonthEditModal_closeButton__iBrWZ",form:"MonthEditModal_form__Q8wp0",field:"MonthEditModal_field__UP4ZY",label:"MonthEditModal_label__pXqxe",input:"MonthEditModal_input__KkQTV",hint:"MonthEditModal_hint__P2aBu",actions:"MonthEditModal_actions__g_FIj",cancelButton:"MonthEditModal_cancelButton__gA0MI"}},98027:(e,t,a)=>{"use strict";a.d(t,{H$:()=>o,gm:()=>i,hi:()=>r});let n={data:null,timestamp:null,version:0};function r(){var e;if((e=n)&&e.timestamp&&Date.now()-e.timestamp<3e5&&null!==n.data)try{return JSON.parse(JSON.stringify(n.data))}catch(e){console.warn("Erro ao deserializar cache:",e),i()}return null}function o(e){try{n={data:JSON.parse(JSON.stringify(e)),timestamp:Date.now(),version:n.version+1}}catch(e){console.warn("Erro ao serializar dados para cache:",e)}}function i(){n={data:null,timestamp:null,version:n.version+1}}}},e=>{e.O(0,[465,862,487,347,131,358],()=>e(e.s=17077)),_N_E=e.O()}]);