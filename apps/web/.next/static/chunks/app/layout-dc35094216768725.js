(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{952:()=>{},7942:(e,t,a)=>{"use strict";a.d(t,{ConditionalNavigation:()=>g});var r=a(73365),o=a(1702),n=a(1521),i=a(18197),s=a.n(i),l=a(14955),c=a(78630),u=a(68567),h=a(92888),d=a.n(h);function m(){let e=(0,o.usePathname)(),t=(0,o.useRouter)(),{theme:a,toggleTheme:i}=(0,l.D)(),{user:h,logout:m,isAuthenticated:g}=(0,c.A)(),[_,v]=(0,n.useState)(!1),[N,f]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=()=>{let e=window.innerWidth<768;f(e),e?v(!1):v(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{N&&v(!1)},[e,N]),(0,r.jsxs)(r.Fragment,{children:[N&&_&&(0,r.jsx)("div",{className:d().overlay,onClick:()=>v(!1)}),(0,r.jsx)("button",{className:d().menuToggle,onClick:()=>{v(!_)},"aria-label":"Toggle menu","aria-expanded":_,children:(0,r.jsxs)("span",{className:d().hamburger,children:[(0,r.jsx)("span",{className:_?d().hamburgerOpen:""}),(0,r.jsx)("span",{className:_?d().hamburgerOpen:""}),(0,r.jsx)("span",{className:_?d().hamburgerOpen:""})]})}),(0,r.jsxs)("aside",{className:"".concat(d().sidebar," ").concat(_?d().sidebarOpen:""," ").concat(N?"":d().sidebarDesktop),children:[(0,r.jsxs)("div",{className:d().sidebarHeader,children:[(0,r.jsx)("h1",{className:d().title,children:"Projeto Financeiro"}),(0,r.jsx)("button",{className:d().themeToggleButton,onClick:i,"aria-label":"Alternar para ".concat("light"===a?"dark":"light"," mode"),children:(0,r.jsx)("span",{className:d().themeToggleIcon,children:"light"===a?"\uD83C\uDF19":"☀️"})})]}),(0,r.jsx)("nav",{className:d().nav,children:(0,r.jsx)("ul",{className:d().menu,children:u.C.map(t=>(0,r.jsx)("li",{children:(0,r.jsxs)(s(),{href:t.href,className:"".concat(d().link," ").concat(e===t.href?d().active:""),onClick:()=>N&&v(!1),children:[(0,r.jsx)("span",{className:d().icon,children:t.icon}),(0,r.jsx)("span",{className:d().label,children:t.label})]})},t.href))})}),(0,r.jsxs)("div",{className:d().sidebarFooter,children:[g&&h&&(0,r.jsxs)("button",{className:d().userButton,onClick:()=>{t.push("/usuario"),N&&v(!1)},"aria-label":"Ver perfil do usu\xe1rio",children:[(0,r.jsx)("span",{className:d().userIcon,children:"\uD83D\uDC64"}),(0,r.jsx)("span",{className:d().userName,children:h.name||h.email})]}),g&&(0,r.jsxs)("button",{className:d().logoutButton,onClick:m,"aria-label":"Sair",children:[(0,r.jsx)("span",{className:d().logoutIcon,children:"\uD83D\uDEAA"}),(0,r.jsx)("span",{className:d().logoutLabel,children:"Sair"})]})]})]})]})}function g(){return"/login"===(0,o.usePathname)()?null:(0,r.jsx)(m,{})}},8208:(e,t,a)=>{"use strict";a.d(t,{ThemeProviderWrapper:()=>n});var r=a(73365),o=a(14955);function n(e){let{children:t}=e;return(0,r.jsx)(o.N,{children:t})}},14955:(e,t,a)=>{"use strict";a.d(t,{D:()=>s,N:()=>i});var r=a(73365),o=a(1521);let n=(0,o.createContext)();function i(e){let{children:t}=e,[a,i]=(0,o.useState)("light");(0,o.useEffect)(()=>{{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",a=e||t;i(a),s(a)}},[]);let s=e=>{{let t=document.documentElement;"dark"===e?t.classList.add("dark"):t.classList.remove("dark")}};return(0,r.jsx)(n.Provider,{value:{theme:a,toggleTheme:()=>{let e="light"===a?"dark":"light";i(e),s(e),localStorage.setItem("theme",e)}},children:t})}function s(){let e=(0,o.useContext)(n);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},21505:(e,t,a)=>{"use strict";a.d(t,{ConditionalMainContent:()=>n});var r=a(73365),o=a(1702);function n(e){let{children:t}=e,a=(0,o.usePathname)();return(0,r.jsx)("main",{className:"main-content ".concat("/login"===a?"login-page":""),children:t})}},41444:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,952,23)),Promise.resolve().then(a.bind(a,21505)),Promise.resolve().then(a.bind(a,7942)),Promise.resolve().then(a.bind(a,8208)),Promise.resolve().then(a.bind(a,78630))},68567:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});let r=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/dividas",label:"D\xedvidas",icon:"\uD83D\uDCB3"},{href:"/salario",label:"Sal\xe1rio",icon:"\uD83D\uDCB0"},{href:"/poupanca",label:"Poupan\xe7a",icon:"\uD83C\uDFE6"},{href:"/planejamento",label:"Planejamento",icon:"\uD83D\uDCC5"}];r.map(e=>e.href).filter(e=>"/"!==e)},78630:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>h,A:()=>d});var r=a(73365),o=a(1521),n=a(1702);async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await fetch("".concat("http://localhost:3333/api").concat(e),{headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!a.ok){let e="Erro ao comunicar com a API";try{e=(await a.json()).message||e}catch(t){e=a.statusText||e}throw Error(e)}if(204===a.status)return null;return await a.json()}catch(e){if(e instanceof Error)throw e;throw Error(e.message||"Erro desconhecido")}}async function s(e,t){if(!e||!t)throw Error("Email e senha s\xe3o obrigat\xf3rios");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim()))throw Error("Email inv\xe1lido");return i("/auth/login",{method:"POST",body:JSON.stringify({email:e.trim().toLowerCase(),password:t})})}async function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||!t)throw Error("Email e senha s\xe3o obrigat\xf3rios");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim()))throw Error("Email inv\xe1lido");if(t.length<6)throw Error("Senha deve ter no m\xednimo 6 caracteres");return i("/auth/register",{method:"POST",body:JSON.stringify({email:e.trim().toLowerCase(),password:t,name:a.trim()})})}async function c(e){if(!e)throw Error("Token n\xe3o fornecido");return i("/auth/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})}let u=(0,o.createContext)(null);function h(e){let{children:t}=e,[a,i]=(0,o.useState)(null),[h,d]=(0,o.useState)(null),[m,g]=(0,o.useState)(!0),_=(0,n.useRouter)(),v=async e=>{try{let t=await c(e);if(!t||!t.user)throw Error("Resposta inv\xe1lida do servidor");i(t.user),d(e),g(!1)}catch(e){i(null),d(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),g(!1)}};(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user");e&&t?(d(e),i(JSON.parse(t)),await v(e)):g(!1)})()},[]);let N=async(e,t)=>{try{let a=await s(e,t);if(!a||!a.user||!a.token)throw Error("Resposta inv\xe1lida do servidor");return i(a.user),d(a.token),localStorage.setItem("auth_token",a.token),localStorage.setItem("auth_user",JSON.stringify(a.user)),a}catch(e){throw e}},f=async(e,t,a)=>{try{let r=await l(e,t,a);if(!r||!r.user||!r.token)throw Error("Resposta inv\xe1lida do servidor");return i(r.user),d(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),r}catch(e){throw e}};return(0,r.jsx)(u.Provider,{value:{user:a,token:h,loading:m,login:N,register:f,logout:()=>{i(null),d(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),_.push("/login")},isAuthenticated:!!a&&!!h},children:t})}function d(){let e=(0,o.useContext)(u);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}},92888:e=>{e.exports={overlay:"Navigation_overlay__7SHFk",fadeIn:"Navigation_fadeIn__A01JG",menuToggle:"Navigation_menuToggle__gZvQE",hamburger:"Navigation_hamburger__BQzIA",hamburgerOpen:"Navigation_hamburgerOpen__pR8GS",sidebar:"Navigation_sidebar__vk6pU",sidebarOpen:"Navigation_sidebarOpen__WTRmB",sidebarDesktop:"Navigation_sidebarDesktop__Z_IQF",sidebarHeader:"Navigation_sidebarHeader__JSnR1",title:"Navigation_title__wf_ak",themeToggleButton:"Navigation_themeToggleButton__XU6LT",themeToggleIcon:"Navigation_themeToggleIcon__Rcpmw",nav:"Navigation_nav__D1U__",menu:"Navigation_menu__ADDmw",link:"Navigation_link__hsWbH",active:"Navigation_active__g2eu3",icon:"Navigation_icon__XrxAw",label:"Navigation_label__LifkG",sidebarFooter:"Navigation_sidebarFooter__khqJ3",userButton:"Navigation_userButton__7eReg",userIcon:"Navigation_userIcon__wxa2L",userName:"Navigation_userName__p6gGv",logoutButton:"Navigation_logoutButton__ZVyJ8",logoutIcon:"Navigation_logoutIcon__eTr37",logoutLabel:"Navigation_logoutLabel___j0Vn"}}},e=>{e.O(0,[877,134,347,131,358],()=>e(e.s=41444)),_N_E=e.O()}]);