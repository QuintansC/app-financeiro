(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{4954:e=>{e.exports={container:"LoadingScreen_container__kroiF",spinner:"LoadingScreen_spinner__Id4H8",spin:"LoadingScreen_spin__CRGcH",message:"LoadingScreen_message__9M_gS"}},9161:e=>{e.exports={container:"page_container__jZF7q",header:"page_header__oRW75",error:"page_error__JBrsB",sectionTitle:"page_sectionTitle__6ic_4",quickActionsTitle:"page_quickActionsTitle__xB8Zf",chartsGrid:"page_chartsGrid__peIB4",chartColumn:"page_chartColumn___bIhV",quickActions:"page_quickActions__u1HV5",quickActionsGrid:"page_quickActionsGrid__QQNue",quickActionCard:"page_quickActionCard__pxwYz",quickActionIcon:"page_quickActionIcon__ETgbE",quickActionText:"page_quickActionText__SrmOO",success:"page_success__r1r7Y",actionButtons:"page_actionButtons__aac_D",addButton:"page_addButton__HNjXU",uploadButton:"page_uploadButton__INvZj",addActionCard:"page_addActionCard__f8FAF"}},13876:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});var n=a(1521),r=a(64785),o=a(98027);function s(){let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(!1),[i,c]=(0,n.useState)(!1),[l,u]=(0,n.useState)(null),d=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(s(!0),u(null),!e){let e=(0,o.hi)();if(e){t(e),s(!1);try{let e=await (0,r.dR)();(0,o.H$)(e),t(e)}catch(e){console.warn("Erro ao atualizar cache em background:",e)}return}}let a=await (0,r.dR)();(0,o.H$)(a),t(a)}catch(a){let e=(0,o.hi)();e?(t(e),u("Erro ao atualizar dados. Mostrando dados em cache.")):u(a.message||"Erro ao carregar dados")}finally{s(!1)}},[]);(0,n.useEffect)(()=>{let e=(0,o.hi)();e&&t(e),d()},[d]);let _=(0,n.useCallback)(async e=>{c(!0),u(null);try{let t=await e();return(0,o.gm)(),await d(!0),t}catch(e){throw u(e.message||"Erro inesperado"),e}finally{c(!1)}},[d]);return{data:e,loading:a,operationLoading:i,error:l,refresh:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d(e)},saveDebt:e=>_(()=>(0,r.cx)(e)),removeDebt:e=>_(()=>(0,r.BH)(e)),saveSalary:e=>_(()=>(0,r.C1)(e)),saveSavings:e=>_(()=>(0,r.Nt)(e)),saveMonth:e=>_(()=>(0,r.a1)(e)),savePreferences:(0,n.useCallback)(async e=>{try{await (0,r.PK)(e),t(t=>({...t,preferences:e}))}catch(e){throw u(e.message||"Erro ao salvar prefer\xeancias"),e}},[]),saveUser:e=>_(()=>(0,r.TK)(e))}}},18539:(e,t,a)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number.isFinite(e)?e:0)}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"".concat(Math.round(100*(e||0)),"%")}function o(e){if(!e)return"â€”";try{return new Intl.DateTimeFormat("pt-BR").format(new Date(e))}catch(t){return e}}a.d(t,{Yq:()=>o,l9:()=>r,vv:()=>n})},23770:e=>{e.exports={button:"Button_button__aJ0V6",primary:"Button_primary__NvDjW",secondary:"Button_secondary__PNkAv",danger:"Button_danger__4QObZ",outline:"Button_outline__VR8yn",ghost:"Button_ghost__8k_dh",small:"Button_small__Dzghh",medium:"Button_medium__6mHOF",large:"Button_large__P9YO9",fullWidth:"Button_fullWidth__uTKaF",loadingContainer:"Button_loadingContainer__AyB9x",spinner:"Button_spinner__7wA18",spin:"Button_spin__rWqPt"}},30029:e=>{e.exports={container:"Section_container__pgS5h",title:"Section_title__dplNc"}},40731:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});var n=a(73365),r=a(23770),o=a.n(r);function s(e){let{title:t,onClick:a,variant:r="primary",size:s="medium",disabled:i=!1,loading:c=!1,fullWidth:l=!1,type:u="button",className:d="",..._}=e,m=[o().button,o()[r],o()[s],i&&o().disabled,l&&o().fullWidth,d].filter(Boolean).join(" ");return(0,n.jsx)("button",{type:u,className:m,onClick:a,disabled:i||c,..._,children:c?(0,n.jsxs)("span",{className:o().loadingContainer,children:[(0,n.jsx)("span",{className:o().spinner}),(0,n.jsx)("span",{children:"Carregando..."})]}):t})}},47732:(e,t,a)=>{Promise.resolve().then(a.bind(a,61755))},56545:(e,t,a)=>{"use strict";a.d(t,{x:()=>s});var n=a(73365),r=a(4954),o=a.n(r);function s(e){let{message:t="Carregando..."}=e;return(0,n.jsxs)("div",{className:o().container,children:[(0,n.jsx)("div",{className:o().spinner}),(0,n.jsx)("p",{className:o().message,children:t})]})}},61755:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var n=a(73365),r=a(1521),o=a(13876),s=a(80146),i=a(18539),c=a(40731),l=a(89019),u=a.n(l);let d={savedBalance:"",currentGoal:"",notes:""};function _(e){let{savings:t,onSubmit:a}=e,[o,s]=(0,r.useState)(d);function l(e,t){s(a=>({...a,[e]:t}))}return(0,r.useEffect)(()=>{t&&s({savedBalance:String(t.savedBalance||""),currentGoal:String(t.currentGoal||""),notes:t.notes||""})},[t]),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:u().label,children:"Saldo guardado"}),(0,n.jsx)("input",{className:u().input,type:"text",value:o.savedBalance,onChange:e=>l("savedBalance",e.target.value),placeholder:"Ex: 10000,00",inputMode:"numeric"}),(0,n.jsx)("label",{className:u().label,children:"Meta atual"}),(0,n.jsx)("input",{className:u().input,type:"text",value:o.currentGoal,onChange:e=>l("currentGoal",e.target.value),placeholder:"Ex: 50000,00",inputMode:"numeric"}),(0,n.jsx)("label",{className:u().label,children:"Observa\xe7\xf5es"}),(0,n.jsx)("textarea",{className:"".concat(u().input," ").concat(u().textarea),value:o.notes,onChange:e=>l("notes",e.target.value),placeholder:"Adicione observa\xe7\xf5es sobre sua poupan\xe7a...",rows:4}),(null==t?void 0:t.lastSavedAt)&&(0,n.jsxs)("p",{className:u().lastSaved,children:["\xdaltimo registro: ",(0,i.Yq)(t.lastSavedAt)]}),(0,n.jsx)(c.$,{title:"Salvar poupan\xe7a",variant:"primary",onClick:function(){null==a||a({savedBalance:Number(o.savedBalance),currentGoal:Number(o.currentGoal),notes:o.notes})},fullWidth:!0,className:u().submitButton})]})}var m=a(56545),p=a(9161),h=a.n(p);function g(){let{data:e,loading:t,refresh:a,saveSavings:i,operationLoading:c}=(0,o.c)(),[l,u]=(0,r.useState)("");if(t&&!e||c)return(0,n.jsx)(m.x,{message:c?"Processando...":"Carregando dados..."});async function d(e){try{await i(e),u("Poupan\xe7a atualizada"),setTimeout(()=>u(""),3e3)}catch(e){u(e.message||"Erro ao atualizar poupan\xe7a")}}return(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsx)("h1",{className:h().header,children:"Poupan\xe7a"}),l&&(0,n.jsx)("div",{className:l.includes("Erro")?h().error:h().success,children:l}),(0,n.jsx)(s.w,{title:"Poupan\xe7a",children:(0,n.jsx)(_,{savings:null==e?void 0:e.savings,onSubmit:d})})]})}},64785:(e,t,a)=>{"use strict";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("auth_token"),n=await fetch("".concat("http://localhost:3333/api").concat(e),{headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers||{}},...t});if(!n.ok)throw 401===n.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"),Error((await n.json().catch(()=>({message:n.statusText}))).message||"Erro ao comunicar com a API");return 204===n.status?null:n.json()}function r(){return n("/dados")}function o(e){return n("/dividas",{method:"POST",body:JSON.stringify(e)})}function s(e){return n("/dividas/".concat(e),{method:"DELETE"})}function i(e){return n("/salario",{method:"POST",body:JSON.stringify(e)})}function c(e){return n("/poupanca",{method:"POST",body:JSON.stringify(e)})}function l(e){return n("/meses",{method:"POST",body:JSON.stringify(e)})}function u(e){return n("/preferencias",{method:"POST",body:JSON.stringify(e)})}function d(e){return n("/acoes-rapidas",{method:"POST",body:JSON.stringify(e)})}function _(e){return n("/acoes-rapidas/ordem",{method:"POST",body:JSON.stringify({routeOrder:e})})}function m(e){return n("/acoes-rapidas/".concat(encodeURIComponent(e)),{method:"DELETE"})}function p(e){return n("/usuario",{method:"POST",body:JSON.stringify(e)})}a.d(t,{BH:()=>s,C1:()=>i,IG:()=>_,Nt:()=>c,PK:()=>u,TK:()=>p,UE:()=>m,a1:()=>l,cx:()=>o,dR:()=>r,wn:()=>d})},80146:(e,t,a)=>{"use strict";a.d(t,{w:()=>s});var n=a(73365),r=a(30029),o=a.n(r);function s(e){let{title:t,children:a}=e;return(0,n.jsxs)("div",{className:o().container,children:[t&&(0,n.jsx)("h2",{className:o().title,children:t}),a]})}},89019:e=>{e.exports={label:"SavingsForm_label__bhWF5",input:"SavingsForm_input__XH93z",textarea:"SavingsForm_textarea__CSjWB",lastSaved:"SavingsForm_lastSaved__OTuJw",submitButton:"SavingsForm_submitButton__q4co1"}},98027:(e,t,a)=>{"use strict";a.d(t,{H$:()=>o,gm:()=>s,hi:()=>r});let n={data:null,timestamp:null,version:0};function r(){var e;if((e=n)&&e.timestamp&&Date.now()-e.timestamp<3e5&&null!==n.data)try{return JSON.parse(JSON.stringify(n.data))}catch(e){console.warn("Erro ao deserializar cache:",e),s()}return null}function o(e){try{n={data:JSON.parse(JSON.stringify(e)),timestamp:Date.now(),version:n.version+1}}catch(e){console.warn("Erro ao serializar dados para cache:",e)}}function s(){n={data:null,timestamp:null,version:n.version+1}}}},e=>{e.O(0,[465,862,487,347,131,358],()=>e(e.s=47732)),_N_E=e.O()}]);